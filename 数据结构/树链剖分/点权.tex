题意：给定一棵树，树中包含 n 个结点，有点权。初始时，1 号节点为树的根节点。现在要对该树进行 m 次操作，操作分为以下 4 种类型：

1. u v k，修改路径上节点权值，将节点 u 和节点 v 之间路径上的所有节点（包括这两个节点）的权值增加 k。

2. u k，修改子树上节点权值，将以节点 u 为根的子树上的所有节点的权值增加 k。

3. u v，询问路径，询问节点 u 和节点 v 之间路径上的所有节点（包括这两个节点）的权值和。

4. u，询问子树，询问以节点 u 为根的子树上的所有节点的权值和。

分析：树剖后以 DFS 序建线段树，子树 u 对应线段树上的区间 [dfn[u], dfn[u]+sz[u]-1]，u v 之间路径的区间构成详见代码。