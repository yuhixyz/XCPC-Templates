只含01边权的差分约束特殊解法，复杂度线性。

先按照差分约束的做法，需要求最长路，建边。然后 Tarjan 缩点，转化为 DAG。如果原图中存在正环一定无解，而这个正环只可能出现在强连通分量中。对于一个强连通分量，其中如果不存在正环，那么所有边权都一定为 0，因此只要判每个 SCC 中是否含有正权边，若有正权边则一定无解。如果有解，在新图上按拓扑序 DP 求最长路即可，初始化 dist[i]=1。

计算答案：每个强连通分量的大小 × 亮度（相同），求和。